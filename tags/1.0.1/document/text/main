<span id="title">I. PHP Korean Extension</span>
</pre>

<TABLE BORDER=1 WIDTH=""100%"" CELLPADDING=4 CELLSPACING=1>
<TR>
<TD align="center"><b>주의</b></TD>
</TR>
<TR>
<TD><pre>
이 모듈은 상당히 실험적인 모듈이다. 이는 이 함수들이 제대로 작동을 하지 못할 수도 있다는 의미이다.
이 함수들이 PHP 정식 버젼에 포함을 하기 위해 리포팅을 할 의사도 별로 없다. 또한 일본에서 작업을 하
고 있는 mbstring 함수와의 관계도 어떻게 될지 알 수가 없다.

또한, 이 함수들은 오로지 한국어 환경만을 고려하여 작성을 한다.
</pre></TD>
</TR>
</TABLE>

<pre>
<span id="title">Introduction</span>

korean extension 은 PHP4 4.3 이상 버전에서 작동하는 한국어 환경의 개발에 필요한
함수들을 제공한다.  개발자가 배포하던 oops phplib 라는 library 를 php extension
으로 모두 구현하였으며, 몇몇 추가된 함수들이 존재한다.

korean extension 의 buildno 가 200212410255 부터는 php 4.3.0 부터 컴파일이 가능
하다.

중요 특징으로는, EUC-KR, CP949, UTF8, NCR code 등의 charset 변환이 가능하며, 웹
상에서 유용하게 사용할 만한 함수들이 제공이 된다.

korean extension 은 korean extension source 안의 phplib 디렉토리에  pure php 코
드로도 구현이 되어 있다.


<a name="changelog">&nbsp;</a>
<span id="title">Changelog</span>

PHP Korean Extexsions Changelog About Version REP_VERSION_REP

* 0.1.2
Sun Mar 19 2006
--------------------------------------------------------------------------------
  by JoungKyun Kim <http://oops.org>
    - fixed documents with html 4 validate
    - fixed sockmail_lib function removed upper html print out
    - fixed segmentation fault in get_mx_record function


* 0.1.1
Thu Mar 16 2006
--------------------------------------------------------------------------------
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed gdImageCreatePaletteFromTrueColor link bug in bundle gd library
    - fixed substr_lib ascii range parsing bug
    - fixed buffer over flow on body_encode function in krmail.c
    - changed err code E_ERROR to E_WARNING when mailresource_lib function failed
    - fixed out of memory of kr_regex_replace_arr function
    - add helo host argument in sockmail_lib function
    - when sending fail, don't stop function any more.


* 0.1.0
Sun Feb 12 2006
--------------------------------------------------------------------------------
  by JoungKyun Kim &lt;http://oops.org&gt;
    - update libgd on php 5.1.2
    - changed create location of tmpfile to PG(upload_tmp_dir)
    - added open basedir check


* 0.0.9
Thu Apr 21 2005
--------------------------------------------------------------------------------
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed warning messages


* 0.0.8
--------------------------------------------------------------------------------
Tue Sep 14 2004
  by JoungKyun Kim &lt;http://oops.org&gt;
    - rewrite strtrim internal function
    - changed efree funtion to safe_efree function
    - fixed mail sent problem


* 0.0.7
--------------------------------------------------------------------------------
Mon Jul 27 2004
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed gd dependency problem
    - gd bundle libaray update

Mon May 31 2004
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed bundle gd library

Wed Dec 10 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - rewrite pcregrep_lib function
    - rewrite krregex.h
    - rewrite get_serverenv function

Tue Dec  2 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed efree bug of pcre_match function
    - rewrite pcregrep_lib function


* 0.0.6
--------------------------------------------------------------------------------
Mon Sep 15 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed fail mail and rcpt rutine on some smtp server in sockmail_lib fucntion
    - fixed setlocale on date of mail header in mailsource_lib function

Thu Sep  4 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - changed to int type from void on putfile_lib function

Sun Aug 31 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed miss free on pcre_match function

Wed Jul 16 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed autolink_lib function bug

Mon Jul 14 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - update human_fsize_lib
    - added gif out patch on libgd

Mon Jun  2 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - update libgd

Wed May 28 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed segment fault when return null byte in pcregrep_lib

Mon May 26 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added unit option in human_fsize_lib function

Tue May 14 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - rewrite readfile_lib fucntion with same function of readfile
    - added pcregrep_lib function and pcre_match internal function


* 0.0.5
--------------------------------------------------------------------------------
Sun Mar  2 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed failure of static compile
    - registed new gd library file
    - removed gd gif read on windows

Sat Mar  1 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed conftest bug of config.m4
    - fixed bug of width value have 0 on imgresize_lib function
    - fixed koren.dsp

Fri Feb 21 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed segmentation fault error of VCWD_REALPATH on FreeBSD

Tue Jan  7 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed gdSinT undefined error when don't include gd extension
    - modified phpinfo data
    - enabled to use on account mode

* 0.0.4
--------------------------------------------------------------------------------
Mon Jan  6 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added script version of korean extension

Wed Jan  1 2003
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added gd version check rutine on krimage.c
    - fixed setment fault of mailsource_lib function
    - modified html_to_plain function on krmail.c

Mon Dec 30 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added small gd library
    - update krimage.c
    - modified config.m4

Sat Dec 29 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added small gd library
    - modified config.m4
    - limits under 4.3.0

Sat Dec 28 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added PHP_NEW_EXTENSION in config.m4 for over 4.2.x

Thu Dec 26 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed typo in agentinfo_lib function

Sun Dec 22 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed segment error on readfile function


* 0.0.3
--------------------------------------------------------------------------------

Thu Dec 13 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - release 0.0.3
    - fixed bad useful variables with realpath
    - fixed gabage return value

Wed Dec 12 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed readfile function on krfile.c
    - fixed case of null string return on readfile_lib
    - fixed realpath under win32
    - updated doucments

Mon Dec 10 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - removed unuseless variables
    - changed system function to file stream function on readfile function

* 0.0.2
--------------------------------------------------------------------------------
Mon Dec  9 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - release 0.0.2
    - changed file stream function to row system function on readfile_lib functoin
    - fixed segment falut of mail function
    - fixed bug that changed addr variable in get_hostname_lib function
    - changed upper case to lower case start charactors of unicode function
    - fixed segment fault on sutstr_lib function
    - update document

Sun Dec  1 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - rewrite human_fsize_lib function
    - rewrite check_table function
    - fixed segmentation falut on krNcrEncode, krNcrDecode function

Wed Nov 30 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - modified project file of MSVC

Wed Nov 27 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - rewrite unicode ncrcode function

Wed Nov 27 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - rewrite utf8encode_lib, utf8decode_lib function
    - fixed memory free problems
    - removed convUTF8 function in krcharset.c

Tue Nov 26 2002
  by HyunSoo Choi &lt;http://baby.web119.com&gt;
    - added new utf8 function

Thu Oct 24 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added memory free for estrdup variables

Sun Sep 22 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added memory free some variables


* 0.0.1
--------------------------------------------------------------------------------
Thu Sep 19 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - release 0.0.1
    - fixed postposition_lib functoin
    - fixed mailresource_lib function overflow error on windows envionment

Wed Sep 18 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - supported windows

Sun Sep  8 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed get_hostname_lib returns null value if reverse value is 0
    - fixed proxy type on get_hostname_lib

Tue Sep  5 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added postposition_lib function

Tue Sep  3 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - removed unuseless variables

Sun Sep  1 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - modified config.m4 for phpize
      use --enable-korean-gd instead of --with-gd for image function
    - fixed segment fault error on sockhttp function
    - changed start charctor and end charactor of unicode transfer function
    - removed include pcre.h header
    - support apache 2

Thu Aug 29 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - supported cygwin
      cygwin doesn't support gd and shared extension mode.

Thu Aug 23 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - supported php 4.3
    - patched read file function that can't read binary file

Thu Aug 22 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added ncrdecode_lib() function
    - removed result_except_ksx_1001 function
    - modified rutine of 2 byte NCR code except range of KSX 1001 on substr_lib() function
    - modifed include header on krnetwork.c
    - changed url information of phpinfo()
    - modified readfile_lib() function
    - restored gd library check on config.m4

Sun Aug 18 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - changed krNcrConv function to krNcrEncode

Fri Aug 16 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - removed include of dns.c on krnetwork.c
    - removed include of files that includes ext/standard dir
    - added krmath.c, php_krmath.h
    - incresed run time speed on string parse function

Wed Aug 14 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - remove bin2hex, hex2bin, bin2dec function on krparse.c
    - arranged string variables
    - update uniConv function on krparsc.c

Tue Aug 13 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - changed duplicate name of array variables with /ext/standard/image.c
    - arranged string variables

Sun Aug 11 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - changed mime type on generate_attach() function
    - added rutine of 2 byte charactor except range of KSX 1001 on substr_lib() function
    - added rutine of 2 byte NCR code except range of KSX 1001 on substr_lib() function

Sat Aug 10 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - supported apache 2

Fri Aug  9 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed mime type of attach file on mailsource_lib() function
    - changed us-ascii from iso-8859-1 on mailsource_lib() function
    - added sockmail_lib() function
    - add php mime type with attach file on mailsource_lib() function
    - fixed Segmentation fault on sockmail_lib() function
    - changed variable type of mxrecord on sockmail_lib() function for FreeBSD

Wed Aug  7 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added mailsource_lib() function

Fri Jul 25 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added remove rutine of utf 8 init charactors on utf8_decode function
    - changed print value of php_info()
    - changed name of builddate_lib function to buildno_lib
    - added version_lib function ( print version of korean extension )

Fri Jul 18 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed problem of null new_type parameter in imgresize_lib function

Wed Jul  3 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added include_path option on readfile_lib function

Sun Jun 30 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - enable to control of remote image on imgResize_lib function

Wed Jun 19 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - modified information of php.ini

Sat Jun 15 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added other browser in get_agent_lib function

Thu Jun 14 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added gd libaray if installed gd is no regular library directory

Thu Jun 13 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - modified config.m4 for supported gd

Fri Jun  7 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed reallocation error in uniencode_lib function

Mon Jun  3 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - added imgresize_lib function (added krimage.c, php_krimage.h)

Fri May 24 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed typo in convUTF6 function

Thu May 23 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed segmentation fault utf8decod function
    - added operation of utf8 in substr_lib

Thu May 16 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed segmentation fault when use perror_lib or pnotice_lib in shell

Tue May 14 2002
  by JoungKyun Kim &lt;http://oops.org&gt;
    - fixed duplicated regist krerror.c in Makefile.in


<a name="install">&nbsp;</a>
<span id="title">Installation</span>

먼저, <a
 href="ftp://mirror.oops.org/pub/oops/php/extensions/mod_korean/"
 target="_blank">ftp://mirror.oops.org/pub/oops/php/extensions/mod_korean/</a>에서 압축 파일을
받는다. 또는 CVS 에서 받도록 한다. 압축 파일을 풀면 korean 이라는 디렉토리가 생
성이 된다.  이 디렉토리를 php-source/ext/korean 으로 위치를 한다. 새로운 모듈을
추가했으므로 php-source top 디렉토리에서 ./buildconf -f 를 실행하여 새로운 모듈
을 등록한다. 다음 ./configure --enable-korean 옵션으로 컴파일을 시작하면 된다.

extension 을 php 모듈로 컴파일을 하기를 원한다면 --enable-korean=shared 로 컴파
일을 하면 extension 이 php-source/module 에 korean.so 로 남게 된다.

image 관련 함수는 korean extension 자체에서 gd library 를 제공을 한다.  만약 시
스템의 gd library 를 이용하여 컴파일을 하고 싶다면 --enable-korean-gd 옵션을 주
도록 한다. korean extension 의 gd library 에서는 GIF/JPG/PNG 를 지원하며, GIF는
read 만 지원이 된다.

만약 apache 웹서버가 DSO 를 지원하도록 설치가 되어 있다면, php 를 새로 설치하지
않고 oops php extension 을 설치할 수 있다.  apache 가 DSO 를 지원 하는지 여부는
httpd -l 명령을 실행한 후에, mod_so.c 가 리스트에 나오면 DSO 를 지원하는 것이다.

DSO 를 지원하고, php 에서 extension 을 모듈로 사용할 경우, 다음의 과정으로 설치
를 하면 된다.

DSO 로 설치할 경우에는 phpize 를 이용한 방법과 풀 소스를 이용하여 설치하는 방법
이 있다.


1. phpize 가 존재할 경우

find /usr -name phpize 를 실행했을 경우 phpize 의 path 를 찾을 수 있을 경우에는
다음의 방법을 이용하여 설치를 한다. 만약 찾지 못할 경우에는 2번 항목을 참고한다.

$ cd /tmp
$ tar xvfpz korean-REP_VERSION_REP.tar.gz
$ cd korean
$ /path/phpize
$ ./configure --with-php-config=/usr/local/bin/php-config
$ make

--with-php-config 의 값은 php-config 명령어의 절대 경로를 지정을 한다.

make 를 마치면 modules 디렉토리에 korean.so 가 생성이 된다. 이 파일을 php extension
이 존재하는 디렉토리에 넣어주고, php.ini 에서

extension=korean.so

를 등록한 후에, apache 를 재시작 하면 된다. 만약 extension 모듈로 사용하지 않을
경우에는 php.ini 의 extension_dir 을 절대 경로로 임의의 디렉토리를 지정해 준 다
음 지정한 디렉토리에 korean.so 를 복사하고, 위의 extension=korean.so 를 php.ini
에 등록한 후에 apache 를 재시작 하면 된다.

다음 phpinfo() 함수를 호출하여, korean 으로 검색해서, 정보가 나오는지 확인을 하
면 된다.

2. DSO 로 설치하기 위하여 apxs 의 위치를 확인
$ find /usr -name apxs
/usr/sbin/apxs

$ cd /tmp

# gz 파일을 받았을 경우
$ tar xvfpz php-REP_PHPVERSION_REP.tar.gz

# bzip2 파일을 받았을 경우
$ bzip -cd php-REP_PHPVERSION_REP.tar.bz2 | tar xvf -

$ cd php-<?=$phpversoin?>/ext
$ tar xvfpz korean-REP_VERSION_REP.tar.gz
$ cd ../
$ ./buildconf

# 자신의 서버가 Pentium ll 이상일 경우
$ export CFLAGS="-O3 -march=i686"
$ ./configure --with-apxs=/usr/sbin/apxs --with-regex=php --enable-korean=shared
$ .......

$ cd ext/korean
$ make

까지 하면 php-REP_PHPVERSION_REP/modules 에 korea.so 가 생성이 된다. 이 파일을 php extension
이 존재하는 디렉토리에 넣어주고, php.ini 에서

extension=korean.so

를 등록한 후에, apache 를 재시작 하면 된다. 만약 extension 모듈로 사용하지 않을
경우에는 php.ini 의 extension_dir 을 절대 경로로 임의의 디렉토리를 지정해 준 다
음 지정한 디렉토리에 korean.so 를 복사하고, 위의 extension=korean.so 를 php.ini
에 등록한 후에 apache 를 재시작 하면 된다.

다음 phpinfo() 함수를 호출하여, korean 으로 검색해서, 정보가 나오는지 확인을 하
면 된다.

3. 정적으로 컴파일 하기

php source 의 ext 디렉토리에 korean-REP_VERSION_REP.tar.gz 의 압축을 풀고 php source의
top path 에서 ./buildconf 를 한번 실행을 하여 configure 파일을 재작성 한 후, 이
configure 에 --enable-korean 이 등록이 되었는지 확인을 한 후, configure 에서
--enable-korean 옵션을 추가하여 설치를 하면 된다.

CVS 파일 받기

cvs -d :pserver:anonymous@cvs.oops.org:/data/cvs/php login
password: cvs
cvs -d :pserver:anonymous@cvs.oops.org:/data/cvs/php co mod_korean

CVS tree 는 http://cvs.oops.org/index.cgi/mod_korean/?cvsroot=OOPS-PHP 에서 확
인할 수 있다.
